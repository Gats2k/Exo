160.120.141.248,10.81.2.2,172.31.128.47 - - [17/Mar/2025 02:25:02] "POST /socket.io/?EIO=4&transport=polling&t=PMXwpBH&sid=rn0nmzXoNHQc24m3AAAG HTTP/1.1" 200 253 0.000449
160.120.141.248,10.81.4.3,172.31.128.47 - - [17/Mar/2025 02:25:02] "GET /socket.io/?EIO=4&transport=polling&t=PMXwpBI&sid=rn0nmzXoNHQc24m3AAAG HTTP/1.1" 200 189 0.002808
(5120) accepted ('172.31.128.47', 35186)
160.120.141.248,10.81.4.3,172.31.128.47 - - [17/Mar/2025 02:25:02] "GET /socket.io/?EIO=4&transport=polling&t=PMXwpF2&sid=rn0nmzXoNHQc24m3AAAG HTTP/1.1" 200 157 0.598958
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:04] "GET /admin/data/web HTTP/1.1" 200 34765 2.979307
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:30] "POST /admin/settings/model HTTP/1.1" 200 196 0.001204
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:37] "POST /admin/settings/model HTTP/1.1" 200 196 0.000978
160.120.141.248,10.81.1.18,172.31.128.47 - - [17/Mar/2025 02:25:45] "GET /socket.io/?EIO=4&transport=websocket&sid=D364vJzlkDuxYTs7AAAA HTTP/1.1" 200 0 52.741940
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:46] "GET / HTTP/1.1" 200 13097 0.222224
160.120.141.248,10.81.4.3,172.31.128.47 - - [17/Mar/2025 02:25:46] "GET /static/css/style.css HTTP/1.1" 304 184 0.001320
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:46] "GET /static/js/main.js HTTP/1.1" 304 182 0.001249
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:46] "GET /socket.io/?EIO=4&transport=polling&t=PMXw-3n HTTP/1.1" 200 276 0.000248
160.120.141.248,10.81.9.32,172.31.128.47 - - [17/Mar/2025 02:25:46] "POST /socket.io/?EIO=4&transport=polling&t=PMXw-6t&sid=7k7xdoAQ8wX_GtYNAAAI HTTP/1.1" 200 253 0.000429
160.120.141.248,10.81.4.3,172.31.128.47 - - [17/Mar/2025 02:25:46] "GET /socket.io/?EIO=4&transport=polling&t=PMXw-6v&sid=7k7xdoAQ8wX_GtYNAAAI HTTP/1.1" 200 189 0.000131
(5120) accepted ('172.31.128.47', 50362)
160.120.141.248,10.81.4.3,172.31.128.47 - - [17/Mar/2025 02:25:47] "GET /socket.io/?EIO=4&transport=polling&t=PMXw-A1&sid=7k7xdoAQ8wX_GtYNAAAI HTTP/1.1" 200 157 0.653090
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful educational assistant focused on reasoning and problem-solving, your name Sony'}, {'role': 'user', 'content': 'salut'}, {'role': 'user', 'content': 'salut'}], 'model': 'deepseek-reasoner', 'stream': False}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.deepseek.com/chat/completions
DEBUG:httpcore.connection:connect_tcp.started host='api.deepseek.com' port=443 local_address=None timeout=5.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f018e2ffd10>
DEBUG:httpcore.connection:start_tls.started ssl_context=<eventlet.green.ssl.GreenSSLContext object at 0x7f018e8b5eb0> server_hostname='api.deepseek.com' timeout=5.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f018e2ff250>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Mon, 17 Mar 2025 02:26:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'291'), (b'Connection', b'keep-alive'), (b'Set-Cookie', b'HWWAFSESID=0605c52c316830c31a3; path=/'), (b'vary', b'origin, access-control-request-method, access-control-request-headers'), (b'access-control-allow-credentials', b'true'), (b'x-ds-trace-id', b'78971d81c4deabfc428d414ed2f38aec'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'HWWAFSESTIME=1742178358725; path=/'), (b'Set-Cookie', b'__cf_bm=Lli1HLC0AMqZR5dQ9MMX7qFqDzmVuMJpdrvNIXcjUCM-1742178361-1.0.1.1-ntsaKOBUoL84HHmGLCpZN4eyrTvMGGPQSiv8sjLi89Kfsl3g_N.Shwb8RiV8GaibipRAI9y39MVc2GRY8IEb7zyjWH_taa7BVcT3tBYp4kI; path=/; expires=Mon, 17-Mar-25 02:56:01 GMT; domain=.deepseek.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'92190b03be3ff604-ORD')])
INFO:httpx:HTTP Request: POST https://api.deepseek.com/chat/completions "HTTP/1.1 400 Bad Request"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:HTTP Response: POST https://api.deepseek.com/chat/completions "400 Bad Request" Headers([('date', 'Mon, 17 Mar 2025 02:26:01 GMT'), ('content-type', 'application/json'), ('content-length', '291'), ('connection', 'keep-alive'), ('set-cookie', 'HWWAFSESID=0605c52c316830c31a3; path=/'), ('vary', 'origin, access-control-request-method, access-control-request-headers'), ('access-control-allow-credentials', 'true'), ('x-ds-trace-id', '78971d81c4deabfc428d414ed2f38aec'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', 'HWWAFSESTIME=1742178358725; path=/'), ('set-cookie', '__cf_bm=Lli1HLC0AMqZR5dQ9MMX7qFqDzmVuMJpdrvNIXcjUCM-1742178361-1.0.1.1-ntsaKOBUoL84HHmGLCpZN4eyrTvMGGPQSiv8sjLi89Kfsl3g_N.Shwb8RiV8GaibipRAI9y39MVc2GRY8IEb7zyjWH_taa7BVcT3tBYp4kI; path=/; expires=Mon, 17-Mar-25 02:56:01 GMT; domain=.deepseek.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '92190b03be3ff604-ORD')])
DEBUG:openai._base_client:request_id: None
DEBUG:openai._base_client:Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1050, in _request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'https://api.deepseek.com/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
DEBUG:openai._base_client:Not retrying
DEBUG:openai._base_client:Re-raising status error
ERROR:app:Error in handle_message: Error code: 400 - {'error': {'message': 'deepseek-reasoner does not support successive user or assistant messages (messages[1] and messages[2] in your input). You should interleave the user/assistant messages in the message sequence.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}